<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">    
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/snackbar.min.css" rel="stylesheet" />
    <link href="assets/css/wrap.css" rel="stylesheet" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
      body {
        background: #eee url('assets/img/bg.jpg') no-repeat bottom right fixed;
        background-position-y: 20px;
      }
      .snackbar {
        background: rgba(0, 23, 52, 0.8);
        padding: 7px;
        color: #fff;
      }
      .clearfix {
        padding: 40px;
      }
      .headerLogo {
        margin: 0 auto;
        margin-top: 15%;
        width: 180px;
      } 
      .inputShadow {
        background-color: #fff;
        padding-left: 7px !important;
      }
      .inputShadow:focus {
        -webkit-box-shadow: inset 0 -2px 0 rgba(0, 23, 52, 0.9) !important;
        box-shadow: inset 0 -2px 0 rgba(0, 23, 52, 0.9) !important;
        background-color: #fafafa !important;
      }
      .inputShadow::-webkit-input-placeholder { font-style: italic; }
      .inputShadow:-moz-placeholder { font-style: italic; }
      .inputShadow::-moz-placeholder { font-style: italic; }
      .inputShadow:-ms-input-placeholder { font-style: italic; }
      .stepwizard-step p {
        margin-top: 10px;
      }
      .stepwizard-row {
        display: table-row;
      }
      .stepwizard {
        display: table;
        width: 100%;
        position: relative;
      }
      .stepwizard-step button[disabled] {
        opacity: 1 !important;
        filter: alpha(opacity=100) !important;
      }
      .stepwizard-row:before {
        top: 14px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 100%;
        height: 1px;
        background-color: #ccc;
        z-order: 0;
      }
      .stepwizard-step {
        display: table-cell;
        text-align: center;
        position: relative;
      }
      .btn-circle {
        width: 30px;
        height: 30px;
        text-align: center;
        padding: 6px 0;
        font-size: 12px;
        line-height: 1.428571429;
        border-radius: 15px;
      }
      .btn-circle:focus, .btn-circle:hover {
        background: rgba(0, 23, 52, 0.8) !important;
      }
      .pictureImage {
        width: 45%;
        background-color: #f6f6f6;
        border-radius: 5px;
        box-shadow: 1px 2px 10px #ddd;
        margin: 0 5px 10px;
        border: 1px solid #ddd;
      }
      .grid-file {
        width: 100%;
        height: 150px;
        background-color: #f6f6f6;
        display: block;
        border-radius: 5px;
        border: 4px dashed #ccc;
        box-shadow: 1px 2px 10px #ccc;
      }
      .btn-file {
        position: relative;
        overflow: hidden;
      }
      .btn-file input[type=file] {
        position: absolute;
        top: 0;
        right: 0;
        min-width: 100%;
        min-height: 100%;
        font-size: 100px;
        text-align: right;
        filter: alpha(opacity=0);
        opacity: 0;
        outline: none;
        background: white;
        cursor: inherit;
        display: block;
      }
      @media only screen and (max-width: 769px) {
        .headerLogo {
          margin-top: 30%;
        }
      }
    </style>
  </head>

  <body onload="init()">
    <div class="row" style="margin-left: 0;margin-right: 0;">
      <div class="text-center" style="margin: 30px 0 40px 0;">
        <img src="assets/img/sspm_logo.png" width="120" class="img" alt="logo" />
      </div>

      <div class="container">
        <div class="stepwizard">
            <div class="stepwizard-row setup-panel">
                <div class="stepwizard-step">
                    <a href="#step-1" type="button" class="btn btn-primary btn-circle"></a>
                    <p>Automovilista</p>
                </div>
                <div class="stepwizard-step">
                    <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled"></a>
                    <p>Vehiculo</p>
                </div>
                <div class="stepwizard-step">
                    <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled"></a>
                    <p>Infracción</p>
                </div>
                <div class="stepwizard-step">
                    <a href="#step-4" type="button" class="btn btn-default btn-circle" disabled="disabled"></a>
                    <p>Fotografías</p>
                </div>
            </div>
        </div>
        <form class="form col-xs-12" role="form" enctype="multipart/form-data">
            <div class="row setup-content" id="step-1">
                <div class="col-xs-12">
                    <div class="col-md-12">
                        <h3>Automovilista</h3>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Nombre completo</label> 
                            <input type="text" name="fullName" id="fullName" class="form-control inputShadow" placeholder="Nombre completo del conductor" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Tipo de licencia</label>
                            <input type="text" name="typeLicense" id="typeLicense" class="form-control inputShadow" placeholder="Tipo de licencia del conductor" maxlength="25" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Número de licencia</label>
                            <input type="text" name="numberLicense" id="numberLicense" class="form-control inputShadow" placeholder="Número de licencia del conductor" maxlength="25" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Fecha de expedición</label>
                            <input type="date" name="dateStart" id="dateStart" class="form-control inputShadow" placeholder="Fecha de expedición de la licencia del conductor" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Fecha de vencimiento</label>
                            <input type="date" name="dateEnd" id="dateEnd" class="form-control inputShadow" placeholder="Fecha de vencimiento de la licencia del conductor" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Sexo</label>
                            <select name="gender" id="gender" class="form-control inputShadow" required>
                              <option selected>Sexo del conductor</option>
                              <option value="MASCULINO">MASCULINO</option>
                              <option value="FEMENINO">FEMENINO</option>
                            </select>
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Fecha de nacimiento</label>
                            <input type="date" name="birthday" id="birthday" class="form-control inputShadow" placeholder="Fecha de nacimiento del conductor" required />
                        </div>
                        <div class="form-group col-xs-12 col-sm-8">
                            <label class="control-label">Dirección</label>
                            <input type="text" name="address" id="address" class="form-control inputShadow" placeholder="Dirección del conductor" maxlength="225" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Estado</label>
                            <input type="text" name="state" id="state" class="form-control inputShadow" placeholder="Estado de procedencia del conductor" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Municipio</label>
                            <input type="text" name="city" id="city" class="form-control inputShadow" placeholder="Ciudad de procedencia del conductor" maxlength="55" required />
                        </div>
                        <input type="hidden" id="latitude" name="latitud" />
                        <input type="hidden" id="longitude" name="latitud" />
                        <div class="clearfix"></div>
                        <div class="form-group col-xs-2 col-xs-offset-5 text-center">
                          <button class="btn btn-primary nextBtn" type="button">
                            <img src="assets/img/arrow.png" width="24" />
                          </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row setup-content" id="step-2">
                <div class="col-xs-12">
                    <div class="col-md-12">
                        <h3>Vehiculo</h3>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">VIN</label> 
                            <input type="text" name="vinVehicle" id="vin" class="form-control inputShadow" placeholder="Número de identificación del vehiculo" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Tipo de vehiculo</label> 
                            <input type="text" name="typeVehicle" id="typeVehicle" class="form-control inputShadow" placeholder="Tipo de vehiculo" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Tipo de placa</label> 
                            <input type="text" name="typePlate" id="typePlate" class="form-control inputShadow" placeholder="Tipo de placa del vehiculo" maxlength="25" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Placa</label> 
                            <input type="text" name="plateVehicle" id="plateVehicle" class="form-control inputShadow" placeholder="Placa del vehiculo" maxlength="25" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Estado</label> 
                            <input type="text" name="statusVehicle" id="statusVehicle" class="form-control inputShadow" placeholder="Estado del vehiculo" maxlength="125" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Marca</label> 
                            <input type="text" name="brandVehicle" id="brandVehicle" class="form-control inputShadow" placeholder="Marca del vehiculo" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Modelo</label> 
                            <input type="text" name="modelVehicle" id="modelVehicle" class="form-control inputShadow" placeholder="Modelo del vehiculo" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Linea</label> 
                            <input type="text" name="lineVehicle" id="lineVehicle" class="form-control inputShadow" placeholder="Linea del vehiculo" maxlength="125" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Color</label> 
                            <input type="text" name="colorVehicle" id="colorVehicle" class="form-control inputShadow" placeholder="Color del vehiculo" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Servicio</label> 
                            <input type="text" name="serviceVehicle" id="serviceVehicle" class="form-control inputShadow" placeholder="Servicio del vehiculo" maxlength="55" required />
                        </div>
                        <div class="clearfix"></div>
                        <div class="form-group col-xs-2 col-xs-offset-5 text-center">
                          <button class="btn btn-primary nextBtn" type="button">
                            <img src="assets/img/arrow.png" width="24" />
                          </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row setup-content" id="step-3">
                <div class="col-xs-12">
                    <div class="col-md-12">
                        <h3>Infracción</h3>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Número de boleta</label> 
                            <input type="text" name="numberFine" id="numberFine" class="form-control inputShadow" placeholder="Número de boleta de infracción" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Número de recibo</label> 
                            <input type="text" name="billFine" id="billFine" class="form-control inputShadow" placeholder="Número de recibo de infracción" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Dirección</label> 
                            <input type="text" name="addressFine" id="addressFine" class="form-control inputShadow" placeholder="Dirección de la infracción" maxlength="225" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Garantía</label> 
                            <input type="text" name="warrantyFine" id="warrantyFine" class="form-control inputShadow" placeholder="Garantía de la infracción" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Estatus</label> 
                            <input type="text" name="statusFine" id="statusFine" class="form-control inputShadow" placeholder="Estatus de la infracción" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Distrito</label> <!-- iDistrito - BD --> 
                            <input type="text" name="districtFine" id="districtFine" class="form-control inputShadow" placeholder="Distrito de la infracción" maxlength="225" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Oficial</label> <!-- iOficial - BD -->  
                            <input type="text" name="oficcerFine" id="oficcerFine" class="form-control inputShadow" placeholder="Oficial de la infracción" maxlength="55" required />
                        </div>
                        <div class="form-group col-xs-6 col-sm-4">
                            <label class="control-label">Artículo</label> <!-- iArticulo - BD -->  
                            <input type="text" name="articleFine" id="articleFine" class="form-control inputShadow" placeholder="Artículo de la infracción" maxlength="55" required />
                        </div>
                        <div class="clearfix"></div>
                        <div class="form-group col-xs-2 col-xs-offset-5 text-center">
                          <button class="btn btn-primary nextBtn" type="button">
                            <img src="assets/img/arrow.png" width="24" />
                          </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
            <div class="row setup-content" id="step-4">
                <div class="col-xs-12">
                    <div class="col-md-12">
                        <h3>Fotografías</h3>
                        <div class="form-group col-xs-6">
                          <span class="btn-file grid-file">
                            <p style="text-align: center;margin-top: 60px;">Selecciona las imagenes</p>
                            <input type="file" capture="camera" accept="image/*;capture=camera" id="takePicture" multiple />
                          </span>
                        </div>
                        <div class="form-group col-xs-6">
                          <div class="contentImage" id="contentImage"></div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="form-group col-xs-2 col-xs-offset-5 text-center">
                          <button class="btn btn-primary" type="submit">
                            <img src="assets/img/save.png" width="24" />
                          </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
      </div>

    </div> 

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="assets/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/snackbar.min.js"></script>
    <script src="assets/js/wizard.js"></script>
    <script type="text/javascript">
      $(function () {
        var queryString = new Array();
        if (queryString.length == 0) {
          if (window.location.search.split('?').length > 1) {
            var params = window.location.search.split('?')[1].split('&');
            for (var i = 0; i < params.length; i++) {
              var key = params[i].split('=')[0];
              var value = decodeURIComponent(params[i].split('=')[1]);
              queryString[key] = value;
            }
          }
        }
        if (queryString["plate"] != null && queryString["fullName"] != null) {
          $('#plateVehicle').val(queryString["plate"]);
          $('#typeLicense').val(queryString["typeLicense"]);
          $('#fullName').val(queryString["fullName"]);
          $('#numberLicense').val(queryString["numberLicense"]);
          $('#state').val(queryString["state"]);
          $('#typePlate').val(queryString["typePlate"]);
          $('#typeVehicle').val(queryString["typeVehicle"]);
          $('#brandVehicle').val(queryString["brand"]);
          $('#modelVehicle').val(queryString["model"]);
          $('#lineVehicle').val(queryString["serie"]);
          $('#colorVehicle').val(queryString["color"]);
          $('#serviceVehicle').val(queryString["service"]);
        }
      });  
    </script>
    <script type="text/javascript">
      var Geo={};
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success, error);
      }
      function success(position) {
        Geo.lat = position.coords.latitude;
        Geo.lng = position.coords.longitude;
        populateHeader(Geo.lat, Geo.lng);
      }
      function error(){
        console.log("Geocoder failed");
      }
      function populateHeader(lat, lng){
        $('#latitude').val(lat);
        $('#longitude').val(lng);
      }
    </script>
    <!--script type="text/javascript">
      var desiredWidth;
      $(document).ready(function() {
          console.log('onReady');
          $("#takePicture").on("change",gotPic);
          desiredWidth = window.innerWidth;
          if(!("url" in window) && ("webkitURL" in window)) {
            window.URL = window.webkitURL;   
          }
      });   
      function gotPic(event) {
        if(event.target.files.length >= 1 && event.target.files.length <= 4) {
          var html = '<div>';
          for(var i = 0; i < event.target.files.length; i++) {
            html += '<img class="pictureImage" src="' + URL.createObjectURL(event.target.files[i]) + '">';
          }
          html += '</div>';
          $('.contentImage').html(html);
        } else if(event.target.files.length > 4) {
          $.snackbar({
            content: "Solamente puedes seleccionar máximo 4 imagenes.", 
            timeout: 5000
          }); 
        }
      }              
    </script-->
    <script type="text/javascript">
      var fileToInsert = document.getElementById("contentImage");

      document.querySelector('#takePicture').onchange = function(e) {
        validateFiles(this.files);
      };

      function validateFiles (files) {
        if (typeof files !== "undefined" && files.length >= 1 && event.target.files.length <= 4) {
          for (var i=0, l=files.length; i<l; i++) {
            uploadFile(files[i]);
          }
        } else if(files.length > 4) {
          $.snackbar({
            content: "Solamente puedes seleccionar máximo 4 imagenes.", 
            timeout: 5000
          }); 
        }
      }

      function uploadFile (file) {
        var div = document.createElement("div"),
            img,
            reader;

        if (typeof FileReader !== "undefined" && (/image/i).test(file.type)) {
          img = document.createElement("img");
          div.appendChild(img);
          reader = new FileReader();  
          console.log("reader",reader);
          reader.onload = (function (theImg) {
            return function (evt) {
              var src = evt.target.result;
              theImg.src = src;
              theImg.className = "pictureImage";
            };
          }(img));
          reader.readAsDataURL(file);
        }
      
        fileToInsert.appendChild(div);
      }
    </script>

  </body>
</html>